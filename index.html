<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Vòng Xoay Kim Cương Free Fire</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #111;
    color: #fff;
    text-align: center;
    padding: 50px;
  }
  #wheel {
    margin: 0 auto;
    width: 300px;
    height: 300px;
    border: 10px solid #ff4500;
    border-radius: 50%;
    position: relative;
    overflow: hidden;
  }
  #wheel canvas {
    width: 100%;
    height: 100%;
  }
  #spinButton {
    margin-top: 20px;
    padding: 10px 20px;
    font-size: 18px;
    background: #ff4500;
    border: none;
    color: white;
    cursor: pointer;
    border-radius: 8px;
  }
  #result {
    margin-top: 20px;
    font-size: 24px;
  }
</style>
</head>
<body>

<h1>Vòng Xoay Kim Cương Free Fire</h1>
<div id="wheel"></div>
<button id="spinButton">Quay Ngay</button>
<div id="result"></div>

<script>
// Phần thưởng trên vòng xoay
const prizes = [
  "100 KC",
  "500 KC",
  "1000 KC",
  "2000 KC",
  "9999 KC",
  "0 KC",
  "300 KC",
  "1500 KC"
];

// Tạo canvas vòng xoay
const wheel = document.createElement('canvas');
wheel.width = 300;
wheel.height = 300;
document.getElementById('wheel').appendChild(wheel);

const ctx = wheel.getContext('2d');
const centerX = wheel.width / 2;
const centerY = wheel.height / 2;
const radius = 140;
const numSegments = prizes.length;
const segmentAngle = (2 * Math.PI) / numSegments;

function drawWheel(angle = 0) {
  ctx.clearRect(0, 0, wheel.width, wheel.height);
  for (let i = 0; i < numSegments; i++) {
    const startAngle = i * segmentAngle + angle;
    const endAngle = startAngle + segmentAngle;
    ctx.beginPath();
    ctx.moveTo(centerX, centerY);
    ctx.arc(centerX, centerY, radius, startAngle, endAngle);
    ctx.closePath();
    ctx.fillStyle = i % 2 === 0 ? "#ff5722" : "#e64a19";
    ctx.fill();
    ctx.strokeStyle = "#fff";
    ctx.stroke();

    // Vẽ text phần thưởng
    ctx.save();
    ctx.translate(centerX, centerY);
    ctx.rotate(startAngle + segmentAngle / 2);
    ctx.textAlign = "right";
    ctx.fillStyle = "#fff";
    ctx.font = "bold 14px Arial";
    ctx.fillText(prizes[i], radius - 10, 10);
    ctx.restore();
  }

  // Vẽ mũi tên
  ctx.fillStyle = "#fff";
  ctx.beginPath();
  ctx.moveTo(centerX - 10, centerY - radius - 20);
  ctx.lineTo(centerX + 10, centerY - radius - 20);
  ctx.lineTo(centerX, centerY - radius - 5);
  ctx.closePath();
  ctx.fill();
}

let currentAngle = 0;
let spinning = false;

function spin() {
  if (spinning) return;
  spinning = true;

  let spinTime = 0;
  const spinTimeTotal = 4000 + Math.random() * 3000;
  const startAngle = currentAngle;

  function animate() {
    spinTime += 30;
    if (spinTime >= spinTimeTotal) {
      spinning = false;
      currentAngle = currentAngle % (2 * Math.PI);
      const index = Math.floor((2 * Math.PI - currentAngle) / segmentAngle) % numSegments;
      document.getElementById("result").textContent = "Bạn trúng: " + prizes[index] + "!";
      return;
    }
    const easeOut = (t) => 1 - Math.pow(1 - t, 3);
    const t = spinTime / spinTimeTotal;
    currentAngle = startAngle + easeOut(t) * 10 * 2 * Math.PI;
    drawWheel(currentAngle);
    requestAnimationFrame(animate);
  }

  animate();
}

drawWheel();
document.getElementById("spinButton").addEventListener("click", spin);
</script>

</body>
</html>
